<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Applied Linguistics Revision Game</title>
    <link rel="stylesheet" href="../css/style4.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <header>
            <h3>Applied Linguistics Revision Game</h3>
        </header>
         <a href="../module1/lesson-three.html" class="back-to-lesson-btn">Back to lesson</a>

        
        <div class="game-info">
            <div><i class="fas fa-star"></i> Score: <span id="score-value">0</span></div>
            <div><i class="fas fa-clock"></i> Time: <span id="time-value">60</span>s</div>
        </div>
        
        <div class="game-container">
            <div class="mode-selector">
                <button class="mode-btn active" data-mode="mcq">Multiple Choice</button>
                <button class="mode-btn" data-mode="true-false">True/False</button>
            </div>
            
            <div class="progress-container">
                <div class="progress-bar" id="progress-bar"></div>
            </div>
            
            <div class="question-card">
                <div class="question" id="question-text">Loading question...</div>
                <div id="game-content">
                    <!-- Dynamic content will go here -->
                </div>
                <div class="feedback" id="feedback"></div>
            </div>
            
            <div class="controls">
                <button class="btn next-btn" id="next-btn" disabled>Next Question</button>
                <button class="btn reset-btn" id="reset-btn">Reset Game</button>
            </div>
            

            

        </div>
        
        <footer>
            <p>Applied Linguistics Revision Tool | Based on Brumfit (1977), Spolsky (2005), Widdowson, and AAAL</p>
        </footer>
    </div>

    <script>
        // ===== QUESTION BANK =====
        const mcqQuestions = 
        [
  {
    "question": "What is the primary purpose of Error Analysis (EA) in second language acquisition?",
    "options": [
      "To predict learner errors before instruction begins using L1-L2 comparison",
      "To describe and explain systematic deviations in actual learner language output",
      "To eliminate all non-native speaker accents through phonetic drills",
      "To rank learners based on their grammatical accuracy"
    ],
    "correct": 1,
    "feedback": " EA focuses on describing and explaining systematic errors in real learner output. It emerged because Contrastive Analysis failed to predict many actual errors (e.g., *goed*), which stem from L2 internal processes—not L1 interference."
  },
  {
    "question": "How does Error Analysis distinguish between 'errors' and 'mistakes'?",
    "options": [
      "Mistakes are systematic and reflect incomplete knowledge; errors are random slips.",
      "Errors are performance slips that can be self-corrected; mistakes reflect competence gaps.",
      "Errors are systematic deviations reflecting incomplete L2 knowledge; mistakes are random, self-correctable performance slips.",
      "There is no meaningful distinction between the two terms in SLA."
    ],
    "correct": 2,
    "feedback": " In EA, errors (e.g., always omitting third-person -s) are systematic and reveal gaps in competence. Mistakes (e.g., saying 'he go' when tired) are random performance errors that learners can self-correct."
  },
  {
    "question": "Why is Error Analysis considered more learner-centered than Contrastive Analysis?",
    "options": [
      "Because it ignores the learner’s output and focuses only on teacher intuition",
      "Because it studies the learner’s actual language production and treats them as an active hypothesis-former",
      "Because it assumes all learners have the same L1 background",
      "Because it prioritizes native-speaker norms above all else"
    ],
    "correct": 1,
    "feedback": " EA shifts focus from teacher assumptions (based on L1/L2 comparison in CA) to the learner’s real output, viewing them as an active constructor of L2 knowledge—making it genuinely learner-centered."
  },
  {
    "question": "Which of the following is an example of an intralingual error?",
    "options": [
      "Using Arabic word order in an English sentence",
      "Saying 'He goed to school' instead of 'He went to school'",
      "Translating 'close the TV' directly from Arabic",
      "Pronouncing English /p/ like Arabic /b/"
    ],
    "correct": 1,
    "feedback": " 'He goed' results from overgeneralizing the English regular past tense rule to an irregular verb—a classic intralingual error, arising from within the L2 system, not L1 interference."
  },
  {
    "question": "Which error by an Arab learner of English is likely interlingual (due to L1 transfer)?",
    "options": [
      "Saying 'She go every day' instead of 'She goes every day'",
      "Saying 'book Ali' instead of 'Ali’s book'",
      "Saying 'runned' instead of 'ran'",
      "Saying 'He is comes' due to tense confusion"
    ],
    "correct": 1,
    "feedback": " 'Book Ali' reflects Arabic possessive structure (noun + possessor), directly transferred into English—making it an interlingual (transfer) error."
  },
  {
    "question": "What is the first step in Sridhar’s (1980) Error Analysis methodology?",
    "options": [
      "Design corrective drills and lessons",
      "Classify errors by type and source",
      "Collect samples of learner language containing errors",
      "Calculate error frequencies across learners"
    ],
    "correct": 2,
    "feedback": " Sridhar’s first step is to collect learner output (e.g., essays, oral transcripts). Only after collection can errors be identified, classified, and diagnosed."
  },
  {
    "question": "What is the key difference between interlingual and intralingual errors?",
    "options": [
      "Interlingual errors occur in writing; intralingual errors occur in speech",
      "Interlingual errors result from L1 interference; intralingual errors result from misuse of L2 rules",
      "Intralingual errors are more serious than interlingual ones",
      "Interlingual errors can always be self-corrected"
    ],
    "correct": 1,
    "feedback": " Interlingual errors stem from L1 interference (e.g., Arabic syntax in English). Intralingual errors arise from internal L2 rule misapplication (e.g., overgeneralization like *goed*)."
  },
  {
    "question": "Why might Error Analysis fail to detect some learner difficulties?",
    "options": [
      "Because learners often overuse difficult structures to show proficiency",
      "Because teachers correct all errors immediately in class",
      "Because learners may avoid using challenging L2 structures altogether (avoidance strategy)",
      "Because EA only analyzes phonological errors"
    ],
    "correct": 2,
    "feedback": " If a learner avoids passive voice or relative clauses due to uncertainty, no errors appear in their output—so EA underestimates their real challenges. This is known as 'avoidance strategy.'"
  },
  {
    "question": "How does Error Analysis inform teaching practice?",
    "options": [
      "By proving that all errors must be ignored to maintain fluency",
      "By helping teachers prioritize serious, frequent errors and design targeted feedback and materials",
      "By replacing all grammar instruction with communicative tasks",
      "By requiring teachers to speak the students’ L1 fluently"
    ],
    "correct": 1,
    "feedback": " EA helps teachers identify which errors are frequent, systematic, and serious—enabling them to prioritize correction, design remedial lessons, and provide meaningful feedback."
  },
  {
    "question": "What is a limitation of using native-speaker norms as the sole standard in Error Analysis?",
    "options": [
      "Native speakers never make grammatical errors",
      "Learners always aim for native-like pronunciation",
      "It ignores functional communication, intelligibility, and linguistic variation in real-world use",
      "It overemphasizes the role of L1 interference"
    ],
    "correct": 2,
    "feedback": " A sentence like 'He don’t like it' may be non-standard but fully intelligible and appropriate in certain contexts. Rigid native-speaker norms overlook communicative success and sociolinguistic variation."
  },
  {
    "question": "Can an error be both interlingual and intralingual in origin?",
    "options": [
      "No—errors must be classified strictly as one or the other",
      "Yes—depending on the learner’s background, an error like 'She go' could stem from L1 (Arabic lacks conjugation) or L2 overgeneralization",
      "Only phonological errors can be both",
      "Only beginners make ambiguous errors"
    ],
    "correct": 1,
    "feedback": " Classification can be ambiguous. 'She go' might reflect Arabic (no verb conjugation → interlingual) or overgeneralization of 'I go' → intralingual. Context and learner history are needed for accurate diagnosis."
  },
  {
    "question": "How does Error Analysis view the language learner?",
    "options": [
      "As a passive recipient of linguistic input shaped by habit formation",
      "As an active constructor of knowledge who forms and tests hypotheses about L2 rules",
      "As someone who should never make errors if taught properly",
      "As a mimic of native-speaker behavior"
    ],
    "correct": 1,
    "feedback": " EA sees learners as creative, cognitive agents who actively build internal L2 systems—contrasting with CA’s behaviorist view of language as habit formation."
  },
  {
    "question": "Why can’t Error Analysis alone fully explain L2 development?",
    "options": [
      "Because it focuses only on what learners do correctly",
      "Because it analyzes errors in isolation without considering developmental sequences",
      "Because it overpredicts errors that never occur",
      "Because it requires advanced computational tools"
    ],
    "correct": 1,
    "feedback": " EA reveals what learners *can’t do* at a given time but doesn’t track *progress over time* or analyze correct usage. It lacks the developmental perspective offered by Interlanguage Theory."
  },
  {
    "question": "Which of the following is a syntactic intralingual error?",
    "options": [
      "Saying 'Ahmad book' due to Arabic possessive structure",
      "Saying 'He is comes to school' by miscombining verb forms",
      "Pronouncing 'think' as 'sink' due to L1 phonology",
      "Using 'big news' to mean 'important gossip' based on L1 logic"
    ],
    "correct": 1,
    "feedback": " 'He is comes' shows confusion within the English tense-aspect system—incorrectly combining auxiliary 'is' with a base verb instead of the -ing form—an intralingual syntactic error."
  },
  {
    "question": "What is the main contrast between the goals of Contrastive Analysis (CA) and Error Analysis (EA)?",
    "options": [
      "CA describes actual errors; EA predicts them before teaching",
      "CA focuses on L2 internal rules; EA focuses on L1 interference",
      "CA aims to predict difficulties via L1/L2 comparison; EA aims to describe and explain actual learner errors",
      "CA is learner-centered; EA is teacher-centered"
    ],
    "correct": 2,
    "feedback": " CA is predictive and theory-driven (L1/L2 comparison). EA is descriptive and data-driven—it analyzes real learner output to understand acquisition and improve teaching."
  },
  {
    "question": "What does 'false concept formation' refer to in Error Analysis?",
    "options": [
      "Misunderstanding L2 vocabulary based on incorrect hypothesis (e.g., 'big news' = important gossip)",
      "Confusing two native languages when learning a third",
      "Believing that all English verbs follow regular patterns",
      "Thinking that pronunciation doesn’t matter in communication"
    ],
    "correct": 0,
    "feedback": " False concept formation is an intralingual semantic error where learners form incorrect meanings for L2 words—often influenced by L1 logic or incomplete input."
  },
  {
    "question": "Which step comes LAST in Sridhar’s (1980) EA methodology?",
    "options": [
      "Identify deviations from target language norms",
      "Classify error types",
      "Determine error sources (e.g., transfer, overgeneralization)",
      "Design remedies such as drills, lessons, or feedback strategies"
    ],
    "correct": 3,
    "feedback": " After collecting, identifying, classifying, and diagnosing errors, the final step is to design pedagogical remedies—making EA directly useful for teaching."
  },
  {
    "question": "What type of error is 'close the TV' (instead of 'turn off the TV') by an Arab learner?",
    "options": [
      "Intralingual syntactic error",
      "Interlingual (transfer) semantic error",
      "Phonological mistake",
      "Developmental overgeneralization"
    ],
    "correct": 1,
    "feedback": " This is a direct translation from Arabic, where 'close' is used with electronic devices. It reflects L1 semantic interference—making it an interlingual (transfer) error."
  },
  {
    "question": "Which of the following best reflects a phonological intralingual error?",
    "options": [
      "Pronouncing English /v/ as /f/ due to Arabic phonology",
      "Saying 'runned' instead of 'ran'",
      "Overgeneralizing English vowel patterns and mispronouncing 'count' like 'country'",
      "Using French intonation in English sentences"
    ],
    "correct": 2,
    "feedback": " Mispronouncing 'count' based on an overgeneralized internal rule about English vowels—without L1 influence—is a phonological intralingual error."
  },
  {
    "question": "Why did Error Analysis emerge historically in SLA research?",
    "options": [
      "Because teachers wanted to eliminate all use of L1 in the classroom",
      "Because Contrastive Analysis successfully predicted all learner errors",
      "Because researchers observed errors that CA couldn’t explain, such as 'goed' or 'hurted'",
      "Because native speakers demanded stricter grammar standards"
    ],
    "correct": 2,
    "feedback": " EA emerged in the 1970s when studies showed many common errors (e.g., *goed*) resulted from L2 overgeneralization—not L1 interference—exposing CA’s predictive limitations."
  }
]
            
        






















        const trueFalseQuestions = 
        [
  {
    "question": "Error Analysis (EA) emerged as a response to the limitations of Contrastive Analysis in predicting actual learner errors.",
    "options": ["True", "False"],
    "correct": 0,
    "feedback": "  EA developed because CA failed to predict many real errors (e.g., *goed*), which stem from L2 internal processes like overgeneralization—not L1 interference. EA shifted focus from prediction to observation of actual learner output."
  },
  {
    "question": "In SLA, 'mistakes' and 'errors' are the same thing.",
    "options": ["True", "False"],
    "correct": 1,
    "feedback": "  Mistakes are performance slips (e.g., saying 'he go' when tired)—random and self-correctable. Errors are systematic (e.g., always omitting third-person -s), reflecting incomplete L2 knowledge and cannot be self-corrected."
  },
  {
    "question": "Error Analysis is considered more learner-centered than Contrastive Analysis because it studies actual learner output rather than just comparing L1 and L2.",
    "options": ["True", "False"],
    "correct": 0,
    "feedback": "  EA treats learners as active hypothesis-formers and analyzes their real language use, while CA focuses on teacher assumptions based on L1/L2 comparison—making EA more learner-centered."
  },
  {
    "question": "Overgeneralization, such as saying 'comed' instead of 'came,' is an example of an intralingual error.",
    "options": ["True", "False"],
    "correct": 0,
    "feedback": "  Intralingual errors arise from misapplying L2 rules internally. 'Comed' results from overgeneralizing the regular past tense -ed rule to irregular verbs—a classic intralingual error."
  },
  {
    "question": "Saying 'book Ahmad' instead of 'Ahmad’s book' by an Arab learner is an interlingual (transfer) error.",
    "options": ["True", "False"],
    "correct": 0,
    "feedback": "  This reflects Arabic possessive structure (noun + possessor), directly transferred into English—making it a clear case of interlingual error due to L1 interference."
  },
  {
    "question": "According to Sridhar (1980), the first step in Error Analysis is to design teaching remedies.",
    "options": ["True", "False"],
    "correct": 1,
    "feedback": "  Sridhar’s first step is to collect learner errors. Designing remedies (e.g., drills, lessons) is the final step (step 8), after identifying, classifying, and diagnosing the source of errors."
  },
  {
    "question": "Interlingual errors result from misuse of L2 rules, while intralingual errors come from L1 interference.",
    "options": ["True", "False"],
    "correct": 1,
    "feedback": "  It’s the opposite: interlingual errors stem from L1 interference (e.g., Arabic word order in English), while intralingual errors come from misapplying L2 rules (e.g., *goed*)."
  },
  {
    "question": "Learners sometimes avoid using difficult L2 structures, which can cause Error Analysis to miss real learning challenges.",
    "options": ["True", "False"],
    "correct": 0,
    "feedback": "  This is known as 'avoidance strategy.' If a learner never uses the passive voice, no errors appear—so EA may underestimate their difficulties with that structure."
  },
  {
    "question": "Error Analysis helps teachers prioritize which errors to correct and design targeted instructional materials.",
    "options": ["True", "False"],
    "correct": 0,
    "feedback": "  By identifying frequent and serious errors and their sources (e.g., overgeneralization), EA informs corrective feedback, lesson planning, and material development."
  },
  {
    "question": "Using native-speaker norms as the sole standard in EA is always appropriate because all learners aim for native-like perfection.",
    "options": ["True", "False"],
    "correct": 1,
    "feedback": "  Rigid native-speaker norms ignore communicative success and linguistic variation. A non-standard form like 'He don’t like it' may be fully intelligible and contextually appropriate—EA should consider function, not just form."
  },
  {
    "question": "An error can sometimes be classified as both interlingual and intralingual, depending on the learner’s background and context.",
    "options": ["True", "False"],
    "correct": 0,
    "feedback": "  For example, 'She go school' might reflect Arabic (no verb conjugation → interlingual) or overgeneralization of 'I go' → intralingual. Accurate diagnosis requires contextual and biographical information."
  },
  {
    "question": "Error Analysis views the learner as a passive habit-former shaped by repetition and correction.",
    "options": ["True", "False"],
    "correct": 1,
    "feedback": "  EA sees learners as active constructors of knowledge who form, test, and revise hypotheses about L2 rules—contrasting sharply with CA’s behaviorist (habit-formation) view."
  },
  {
    "question": "Error Analysis provides a complete picture of L2 development by tracking both errors and correct usage over time.",
    "options": ["True", "False"],
    "correct": 1,
    "feedback": "  EA only reveals what learners *can’t do* at a point in time. It doesn’t track developmental progress or analyze correct usage—limiting its insight compared to Interlanguage Theory."
  },
  {
    "question": "Saying 'He is comes' is an example of a syntactic intralingual error.",
    "options": ["True", "False"],
    "correct": 0,
    "feedback": "  This error arises from misapplying L2 rules—incorrectly combining the auxiliary 'is' with a base verb instead of the -ing form—showing confusion within the L2 system (intralingual)."
  },
  {
    "question": "The main goal of Contrastive Analysis is to describe actual learner errors after they occur.",
    "options": ["True", "False"],
    "correct": 1,
    "feedback": "  CA aims to *predict* difficulties *before* teaching by comparing L1 and L2. EA, in contrast, *describes and explains* actual errors *after* they appear in learner output."
  },
  {
    "question": "False concept formation—such as using 'big news' to mean 'important gossip'—is an example of an intralingual semantic error.",
    "options": ["True", "False"],
    "correct": 0,
    "feedback": "  This reflects a misunderstanding of L2 word meaning based on incorrect hypothesis formation (not direct L1 transfer), making it an intralingual error in semantics."
  },
  {
    "question": "All systematic deviations in learner language are considered 'errors' in Error Analysis.",
    "options": ["True", "False"],
    "correct": 0,
    "feedback": "  In EA, 'errors' are defined as consistent, rule-based deviations that reveal gaps in L2 competence—distinguishing them from random 'mistakes' due to fatigue or distraction."
  },
  {
    "question": "Error Analysis assumes that every linguistic deviation must be corrected immediately to ensure proper acquisition.",
    "options": ["True", "False"],
    "correct": 1,
    "feedback": "  EA helps teachers *assess the seriousness* of errors and decide which to address. It supports selective correction based on frequency, impact on communication, and developmental appropriateness—not automatic correction."
  },
  {
    "question": "Phonological intralingual errors can occur when learners overgeneralize L2 sound patterns, such as mispronouncing vowel sounds based on perceived rules.",
    "options": ["True", "False"],
    "correct": 0,
    "feedback": "  For example, pronouncing the /ʌ/ in 'count' like in 'country' due to overgeneralized vowel rules is a phonological intralingual error—stemming from internal L2 system misuse, not L1 influence."
  },
  {
    "question": "Error Analysis replaced Contrastive Analysis entirely and is now the only valid method for studying learner language.",
    "options": ["True", "False"],
    "correct": 1,
    "feedback": "  While EA addressed CA’s limitations, both approaches can complement each other. Modern teaching often integrates CA (for anticipation) and EA (for diagnosis)—neither is obsolete."
  }
]
        

         // ===== GAME STATE =====
        let currentQuestionIndex = 0;
        let score = 0;
        let gameMode = 'mcq';
        let timer;
        let timeLeft = 60;
        let answered = false;
        let selectedOption = null;
        let currentQuestions = [];

        // DOM elements
        const questionText = document.getElementById('question-text');
        const gameContent = document.getElementById('game-content');
        const feedbackElement = document.getElementById('feedback');
        const nextBtn = document.getElementById('next-btn');
        const resetBtn = document.getElementById('reset-btn');
        const scoreValue = document.getElementById('score-value');
        const timeValue = document.getElementById('time-value');
        const progressBar = document.getElementById('progress-bar');
        const modeBtns = document.querySelectorAll('.mode-btn');
        const mistakesSection = document.getElementById('mistakes-section');

        // Shuffle array function (Fisher-Yates algorithm)
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        // Select random subset of questions
        function getRandomQuestions(questions, count = null) {
            const shuffled = shuffleArray(questions);
            if (count && count < questions.length) {
                return shuffled.slice(0, count);
            }
            return shuffled;
        }

        // Get current question set (randomized)
        function getCurrentQuestionSet() {
            if (gameMode === 'mcq') return getRandomQuestions(mcqQuestions, 5);
            if (gameMode === 'true-false') return getRandomQuestions(trueFalseQuestions, 5);
            return [];
        }

        // Initialize game
        function initGame() {
            currentQuestionIndex = 0;
            score = 0;
            timeLeft = 60;
            answered = false;
            selectedOption = null;
            
            // Get randomized questions for this session
            currentQuestions = getCurrentQuestionSet();
            
            scoreValue.textContent = score;
            timeValue.textContent = timeLeft;
            updateProgressBar();
            showQuestion();
            startTimer();
            mistakesSection.classList.remove('show');
            nextBtn.disabled = true;
        }

        // Start timer
        function startTimer() {
            clearInterval(timer);
            timer = setInterval(() => {
                timeLeft--;
                timeValue.textContent = timeLeft;
                
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    if (!answered) {
                        handleTimeUp();
                    }
                }
            }, 1000);
        }

        // Handle time up
        function handleTimeUp() {
            answered = true;
            feedbackElement.innerHTML = `<i class="fas fa-hourglass-end" style="color: var(--warning);"></i> Time's up!`;
            feedbackElement.className = "feedback show";
            nextBtn.disabled = false;
        }

        // Update progress bar
        function updateProgressBar() {
            const progress = ((currentQuestionIndex) / currentQuestions.length) * 100;
            progressBar.style.width = `${progress}%`;
        }

        // Show current question based on mode
        function showQuestion() {
            if (currentQuestionIndex >= currentQuestions.length) {
                endGame();
                return;
            }
            
            const q = currentQuestions[currentQuestionIndex];
            questionText.textContent = q.question;
            feedbackElement.className = 'feedback';
            gameContent.innerHTML = '';
            answered = false;
            nextBtn.disabled = true;
            
            renderMCQ(q);
        }

        // Render MCQ/True-False
        function renderMCQ(q) {
            const optionsContainer = document.createElement('div');
            optionsContainer.className = 'answer-options';
            
            // For MCQ, shuffle options but keep track of correct answer
            let displayOptions = [...q.options];
            let correctIndex = q.correct;
            
            if (gameMode === 'mcq') {
                // Create a copy with indices
                let indexedOptions = q.options.map((opt, i) => ({text: opt, originalIndex: i}));
                // Shuffle
                indexedOptions = shuffleArray(indexedOptions);
                // Update display
                displayOptions = indexedOptions.map(item => item.text);
                correctIndex = indexedOptions.findIndex(item => item.originalIndex === q.correct);
            }
            
            displayOptions.forEach((option, index) => {
                const optionEl = document.createElement('div');
                optionEl.className = 'option';
                optionEl.textContent = option;
                optionEl.addEventListener('click', () => selectMCQOption(index, correctIndex, q));
                optionsContainer.appendChild(optionEl);
            });
            
            gameContent.appendChild(optionsContainer);
        }

        // Handle MCQ option selection
        function selectMCQOption(selectedIndex, correctIndex, q) {
            if (answered) return;
            
            answered = true;
            clearInterval(timer);
            
            const options = gameContent.querySelectorAll('.option');
            options.forEach((opt, i) => {
                if (i === selectedIndex) {
                    opt.classList.add(selectedIndex === correctIndex ? 'correct' : 'incorrect');
                }
                if (i === correctIndex) {
                    opt.classList.add('correct');
                }
            });
            
            if (selectedIndex === correctIndex) {
                    score++;
                    scoreValue.textContent = score;
                    feedbackElement.innerHTML = `<i class="fas fa-check-circle" style="color: var(--success);"></i> Correct! ${q.feedback}`;
                } else {
                    feedbackElement.innerHTML = `<i class="fas fa-times-circle" style="color: var(--accent);"></i> Incorrect. ${q.feedback}`;
                }
            feedbackElement.className = 'feedback show';
            nextBtn.disabled = false;
            
            if (currentQuestionIndex === 0) {
                setTimeout(() => {
                    mistakesSection.classList.add('show');
                }, 1500);
            }
        }

        // Move to next question or end game
        function nextQuestion() {
            currentQuestionIndex++;
            
            if (currentQuestionIndex < currentQuestions.length) {
                timeLeft = 60;
                timeValue.textContent = timeLeft;
                showQuestion();
                startTimer();
            } else {
                endGame();
            }
            
            updateProgressBar();
        }

        // End game
        function endGame() {
            questionText.textContent = `Game Completed! Your final score is ${score}/${currentQuestions.length}`;
            gameContent.innerHTML = '';
            feedbackElement.innerHTML = `<i class="fas fa-trophy" style="color: var(--success);"></i> Great job! You completed ${currentQuestions.length} random questions. Review the revision checklist above.`;
            feedbackElement.className = 'feedback show';
            nextBtn.disabled = true;
            clearInterval(timer);
        }

        // Event listeners
        nextBtn.addEventListener('click', nextQuestion);
        resetBtn.addEventListener('click', initGame);
        
        modeBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                modeBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                gameMode = btn.dataset.mode;
                initGame();
            });
        });

        // Initialize
        window.addEventListener('load', initGame);
    </script>
</body>
</html>       

        
