<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESP Revision Game</title>
    <link rel="stylesheet" href="../css/style4.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <header>
            <h3>ESP Revision Game</h3>
        </header>
         <a href="../module8/lesson-two.html" class="back-to-lesson-btn">Back to lesson</a>

        
        <div class="game-info">
            <div><i class="fas fa-star"></i> Score: <span id="score-value">0</span></div>
            <div><i class="fas fa-clock"></i> Time: <span id="time-value">60</span>s</div>
        </div>
        
        <div class="game-container">
            <div class="mode-selector">
                <button class="mode-btn active" data-mode="mcq">Multiple Choice</button>
                <button class="mode-btn" data-mode="true-false">True/False</button>
            </div>
            
            <div class="progress-container">
                <div class="progress-bar" id="progress-bar"></div>
            </div>
            
            <div class="question-card">
                <div class="question" id="question-text">Loading question...</div>
                <div id="game-content">
                    <!-- Dynamic content will go here -->
                </div>
                <div class="feedback" id="feedback"></div>
            </div>
            
            <div class="controls">
                <button class="btn next-btn" id="next-btn" disabled>Next Question</button>
                <button class="btn reset-btn" id="reset-btn">Reset Game</button>
            </div>
            

            

        </div>
        
        <footer>
            <p>ESP</p>
        </footer>
    </div>

    <script>
        // ===== QUESTION BANK =====
        const mcqQuestions =
        [
  {
    "question": "How does Nunan (1988) define needs analysis?",
    "options": [
      "As a method for testing grammar knowledge",
      "As a family of procedures for gathering information about learners and communication tasks",
      "As a way to reduce teaching costs",
      "As a tool for teacher evaluation"
    ],
    "correct": 1,
    "feedback": " Nunan’s definition centers on **systematic information gathering** about who the learners are and what they need to **do** with the language."
  },
  {
    "question": "According to Brown (2009), what is the purpose of needs analysis?",
    "options": [
      "To replace teacher judgment",
      "To collect random opinions from students",
      "To systematically collect and analyze information necessary for defining a defensible curriculum",
      "To standardize all textbooks"
    ],
    "correct": 2,
    "feedback": " Brown frames needs analysis as the **evidence base** for creating a curriculum that can be logically justified and defended."
  },
  {
    "question": "What did Holec (1980) emphasize about needs assessment?",
    "options": [
      "It should ignore learner input",
      "It establishes a close link between learners and the curriculum",
      "It is only useful for beginners",
      "It replaces classroom teaching"
    ],
    "correct": 1,
    "feedback": " Holec saw needs assessment as a bridge ensuring the curriculum reflects actual learner contexts and goals."
  },
  {
    "question": "According to Richterich and Trim (1980), what does needs analysis include?",
    "options": [
      "Only predicted communication behavior",
      "Only linguistic objectives",
      "A cluster of techniques covering learners, teachers, administrators, social dynamics, career expectations, and more",
      "Only student test scores"
    ],
    "correct": 2,
    "feedback": " They took a **holistic view**—needs analysis encompasses the entire ecosystem of the learning situation."
  },
  {
    "question": "How does Nagarajan (1988) define a learner’s needs?",
    "options": [
      "By their favorite English songs",
      "By the number of vocabulary words they know",
      "By the reasons for learning English and the kind they will use in the future",
      "By their age and gender only"
    ],
    "correct": 2,
    "feedback": " Nagarajan’s definition is purpose-driven—focusing on **learner motivation** and **target language use**."
  },
  {
    "question": "Which scholar described needs analysis as involving 'ego, learners, teachers, administrators, career-expectation and job satisfaction, social dynamics'?",
    "options": [
      "Nunan",
      "Brown",
      "Holec",
      "Richterich and Trim"
    ],
    "correct": 3,
    "feedback": " Richterich and Trim (1980) emphasized the **multidimensional nature** of the learning context in needs analysis."
  },
  {
    "question": "According to the summary, is needs analysis unique to ESP?",
    "options": [
      "Yes, only ESP uses it",
      "No, though it’s a criterion of ESP, other educational fields also use it",
      "Only in medical education",
      "It’s outdated and no longer used"
    ],
    "correct": 1,
    "feedback": " While NA is a **defining feature of ESP**, Berwick and Brindley note it’s also used in other educational contexts."
  },
  {
    "question": "What is a key implication of Brown’s (1995) definition of needs analysis?",
    "options": [
      "Course design should ignore institutional goals",
      "Only student preferences matter",
      "Course objectives must balance student and institutional requirements",
      "Needs analysis is optional"
    ],
    "correct": 2,
    "feedback": " Brown highlights the dual responsibility: meeting **learner needs** while fulfilling **institutional mandates**."
  },
  {
    "question": "Which definition emphasizes that needs analysis supports a 'defensible curriculum'?",
    "options": [
      "Nunan (1988)",
      "Brown (2009)",
      "Holec (1980)",
      "Nagarajan (1988)"
    ],
    "correct": 1,
    "feedback": " Brown (2009) explicitly links needs analysis to creating a curriculum that is logically sound and justifiable."
  },
  {
    "question": "Why is needs analysis considered foundational in ESP according to these scholars?",
    "options": [
      "It reduces the need for teachers",
      "It ensures courses are based on evidence about learners’ real-world language needs",
      "It focuses only on grammar rules",
      "It standardizes all learners"
    ],
    "correct": 1,
    "feedback": " Across definitions, the core idea is that NA grounds ESP in **authentic, context-specific data**—making instruction relevant and effective."
  }
]















        const trueFalseQuestions = 
        [
  {
    "question": "According to Nunan (1988), needs analysis refers to a family of procedures for gathering information about learners and communication tasks.",
    "options": ["True", "False"],
    "correct": 0,
    "feedback": " Nunan (1988) defined needs analysis as a set of procedures to collect information about learners and the language tasks they need to perform."
  },
  {
    "question": "Brown (1995) defined needs analysis as the collection of only subjective data about students.",
    "options": ["True", "False"],
    "correct": 1,
    "feedback": " Brown emphasized the analysis of **both subjective and objective data** to establish course objectives that meet student and institutional requirements."
  },
  {
    "question": "In Brown’s 2009 definition, needs analysis is described as 'the systematic collection and analysis of all information necessary for defining a defensible curriculum.'",
    "options": ["True", "False"],
    "correct": 0,
    "feedback": " This simplified definition highlights that needs analysis provides the evidence base for sound, justifiable curriculum design."
  },
  {
    "question": "Holec (1980) viewed needs assessment as a way to establish a close link between learners and the curriculum.",
    "options": ["True", "False"],
    "correct": 0,
    "feedback": " Holec stressed that needs assessment connects learner realities with curricular design, ensuring relevance and alignment."
  },
  {
    "question": "Richterich and Trim (1980) limited needs analysis to only language skills and grammar points.",
    "options": ["True", "False"],
    "correct": 1,
    "feedback": " They described needs analysis as a **'whole cluster of techniques'** that includes learners, teachers, administrators, social dynamics, career expectations, and more—not just linguistic elements."
  },
  {
    "question": "Nagarajan (1988) defined learner needs in terms of why they want to learn English and what kind of English they will use in the future.",
    "options": ["True", "False"],
    "correct": 0,
    "feedback": " Nagarajan focused on the **purpose and future use** of English—key questions in ESP-oriented needs analysis."
  },
  {
    "question": "Needs analysis is exclusively used in ESP and no other educational fields.",
    "options": ["True", "False"],
    "correct": 1,
    "feedback": " While it’s a **criterion of ESP**, Berwick (1989) and Brindley (1989) noted that other educational enterprises also use needs analysis."
  },
  {
    "question": "According to Richterich and Trim, factors like job satisfaction and social dynamics are irrelevant to needs analysis.",
    "options": ["True", "False"],
    "correct": 1,
    "feedback": " They explicitly included **job satisfaction, social dynamics, learner types, and institutional roles** as relevant parameters in the learning situation."
  },
  {
    "question": "Brown’s definitions emphasize that needs analysis supports the creation of course objectives that satisfy both students and institutions.",
    "options": ["True", "False"],
    "correct": 0,
    "feedback": " His 1995 definition highlights balancing **learner needs** with **institutional requirements** in objective-setting."
  },
  {
    "question": "Needs analysis, according to the summary, is generally regarded as a defining feature (criterion) of ESP.",
    "options": ["True", "False"],
    "correct": 0,
    "feedback": " The summary states that NA is 'generally regarded as a criterion of ESP,' though not unique to it."
  }
]

        
         // ===== GAME STATE =====
        let currentQuestionIndex = 0;
        let score = 0;
        let gameMode = 'mcq';
        let timer;
        let timeLeft = 60;
        let answered = false;
        let selectedOption = null;
        let currentQuestions = [];

        // DOM elements
        const questionText = document.getElementById('question-text');
        const gameContent = document.getElementById('game-content');
        const feedbackElement = document.getElementById('feedback');
        const nextBtn = document.getElementById('next-btn');
        const resetBtn = document.getElementById('reset-btn');
        const scoreValue = document.getElementById('score-value');
        const timeValue = document.getElementById('time-value');
        const progressBar = document.getElementById('progress-bar');
        const modeBtns = document.querySelectorAll('.mode-btn');
        const mistakesSection = document.getElementById('mistakes-section');

        // Shuffle array function (Fisher-Yates algorithm)
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        // Select random subset of questions
        function getRandomQuestions(questions, count = null) {
            const shuffled = shuffleArray(questions);
            if (count && count < questions.length) {
                return shuffled.slice(0, count);
            }
            return shuffled;
        }

        // Get current question set (randomized)
        function getCurrentQuestionSet() {
            if (gameMode === 'mcq') return getRandomQuestions(mcqQuestions, 3);
            if (gameMode === 'true-false') return getRandomQuestions(trueFalseQuestions, 3);
            return [];
        }

        // Initialize game
        function initGame() {
            currentQuestionIndex = 0;
            score = 0;
            timeLeft = 60;
            answered = false;
            selectedOption = null;
            
            // Get randomized questions for this session
            currentQuestions = getCurrentQuestionSet();
            
            scoreValue.textContent = score;
            timeValue.textContent = timeLeft;
            updateProgressBar();
            showQuestion();
            startTimer();
            mistakesSection.classList.remove('show');
            nextBtn.disabled = true;
        }

        // Start timer
        function startTimer() {
            clearInterval(timer);
            timer = setInterval(() => {
                timeLeft--;
                timeValue.textContent = timeLeft;
                
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    if (!answered) {
                        handleTimeUp();
                    }
                }
            }, 1000);
        }

        // Handle time up
        function handleTimeUp() {
            answered = true;
            feedbackElement.innerHTML = `<i class="fas fa-hourglass-end" style="color: var(--warning);"></i> Time's up!`;
            feedbackElement.className = "feedback show";
            nextBtn.disabled = false;
        }

        // Update progress bar
        function updateProgressBar() {
            const progress = ((currentQuestionIndex) / currentQuestions.length) * 100;
            progressBar.style.width = `${progress}%`;
        }

        // Show current question based on mode
        function showQuestion() {
            if (currentQuestionIndex >= currentQuestions.length) {
                endGame();
                return;
            }
            
            const q = currentQuestions[currentQuestionIndex];
            questionText.textContent = q.question;
            feedbackElement.className = 'feedback';
            gameContent.innerHTML = '';
            answered = false;
            nextBtn.disabled = true;
            
            renderMCQ(q);
        }

        // Render MCQ/True-False
        function renderMCQ(q) {
            const optionsContainer = document.createElement('div');
            optionsContainer.className = 'answer-options';
            
            // For MCQ, shuffle options but keep track of correct answer
            let displayOptions = [...q.options];
            let correctIndex = q.correct;
            
            if (gameMode === 'mcq') {
                // Create a copy with indices
                let indexedOptions = q.options.map((opt, i) => ({text: opt, originalIndex: i}));
                // Shuffle
                indexedOptions = shuffleArray(indexedOptions);
                // Update display
                displayOptions = indexedOptions.map(item => item.text);
                correctIndex = indexedOptions.findIndex(item => item.originalIndex === q.correct);
            }
            
            displayOptions.forEach((option, index) => {
                const optionEl = document.createElement('div');
                optionEl.className = 'option';
                optionEl.textContent = option;
                optionEl.addEventListener('click', () => selectMCQOption(index, correctIndex, q));
                optionsContainer.appendChild(optionEl);
            });
            
            gameContent.appendChild(optionsContainer);
        }

        // Handle MCQ option selection
        function selectMCQOption(selectedIndex, correctIndex, q) {
            if (answered) return;
            
            answered = true;
            clearInterval(timer);
            
            const options = gameContent.querySelectorAll('.option');
            options.forEach((opt, i) => {
                if (i === selectedIndex) {
                    opt.classList.add(selectedIndex === correctIndex ? 'correct' : 'incorrect');
                }
                if (i === correctIndex) {
                    opt.classList.add('correct');
                }
            });
            
            if (selectedIndex === correctIndex) {
                    score++;
                    scoreValue.textContent = score;
                    feedbackElement.innerHTML = `<i class="fas fa-check-circle" style="color: var(--success);"></i> Correct! ${q.feedback}`;
                } else {
                    feedbackElement.innerHTML = `<i class="fas fa-times-circle" style="color: var(--accent);"></i> Incorrect. ${q.feedback}`;
                }
            feedbackElement.className = 'feedback show';
            nextBtn.disabled = false;
            
            if (currentQuestionIndex === 0) {
                setTimeout(() => {
                    mistakesSection.classList.add('show');
                }, 1500);
            }
        }

        // Move to next question or end game
        function nextQuestion() {
            currentQuestionIndex++;
            
            if (currentQuestionIndex < currentQuestions.length) {
                timeLeft = 60;
                timeValue.textContent = timeLeft;
                showQuestion();
                startTimer();
            } else {
                endGame();
            }
            
            updateProgressBar();
        }

        // End game
        function endGame() {
            questionText.textContent = `Game Completed! Your final score is ${score}/${currentQuestions.length}`;
            gameContent.innerHTML = '';
            feedbackElement.innerHTML = `<i class="fas fa-trophy" style="color: var(--success);"></i> Great job! You completed ${currentQuestions.length} random questions. Review the revision checklist above.`;
            feedbackElement.className = 'feedback show';
            nextBtn.disabled = true;
            clearInterval(timer);
        }

        // Event listeners
        nextBtn.addEventListener('click', nextQuestion);
        resetBtn.addEventListener('click', initGame);
        
        modeBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                modeBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                gameMode = btn.dataset.mode;
                initGame();
            });
        });

        // Initialize
        window.addEventListener('load', initGame);
    </script>
</body>
</html>       

        
